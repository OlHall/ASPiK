<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Coding the Plugin Parameters with Variable Binding</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('define_plugin4.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Coding the Plugin Parameters with Variable Binding </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>At this point, you can open up the ASPiK Tool-Kit application that is part of the SDK and use the <b>GUI Code Creator</b> to generate the C++ code for both the bound variable as well as the <a class="el" href="class_plugin_parameter.html" title="The PluginParameter object stores all of the data needed for any type of plugin parameter. It is a large object, but it is not complex as it really just stores LOTS of information about plugin parameters. ">PluginParameter</a> declaration and instantiation. <b>NOTE:</b> this is optional and you may always code the plugin parameters by hand. The ASPiK <b>GUI Code Creator</b> is useful for starting out and you can always tweak and modify the code it gerenates. Open the ASPiK Tool-Kit and switch to the GUI Code Creator. The first entry in the GUI control table is for the continuous Volume in dB control (this will map to a continous knob control on the GUI). Select the "Continuous Numeric" control type and fill in the information for the <a class="el" href="class_plugin_parameter.html" title="The PluginParameter object stores all of the data needed for any type of plugin parameter. It is a large object, but it is not complex as it really just stores LOTS of information about plugin parameters. ">PluginParameter</a> and the bound variable from the table. Notice how the variable name "volume_dB" matches the unique control identifier which also matches the previously declared enumeration. Also, since this is our first parameter, we have c checked the "Include PluginParamater* declaration" box - you only need to do this once for the first parameter you define. <br />
 </p><div class="image">
<img src="koder1.png" alt="koder1.png"/>
</div>
<p> <br />
 With this data set, you can now generate the C++ code and paste it into your plugin project:<br />
</p>
<p><b>Bound Variable Code:</b><br />
 goes in the <a class="el" href="plugincore_8h.html" title="base class interface file for ASPiK plugincore object ">plugincore.h</a> file in the "private" area provided for your member variables; click the [Var -&gt; Clipboard] button to copy the code to the clipboard, then paste it into the <a class="el" href="plugincore_8h.html" title="base class interface file for ASPiK plugincore object ">plugincore.h</a> file; note that it will add a default declaration value based on the default value you declared in the GUI Code Creator app.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">class </span><a class="code" href="class_plugin_core.html">PluginCore</a> : <span class="keyword">public</span> <a class="code" href="class_plugin_base.html">PluginBase</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">   <a class="code" href="class_plugin_core.html#abc6de6103b9c47f1255f372bd0074c4c">PluginCore</a>();</div><div class="line">   <span class="keyword">virtual</span> <a class="code" href="class_plugin_core.html#aebc7a77a8afdbd8920d70233f590e2f7">~PluginCore</a>(){}</div><div class="line">   <span class="comment">// SNIP SNIP SNIP...</span></div><div class="line">   </div><div class="line"><span class="keyword">private</span>:</div><div class="line">   <span class="comment">// --- Continuous Plugin Variables </span></div><div class="line">   <span class="keywordtype">double</span> volume_dB = 0.000000; <span class="comment">// &lt;-- bound member variable!</span></div><div class="line">   </div><div class="line">   <span class="comment">// etc...</span></div></div><!-- fragment --><p><b><a class="el" href="class_plugin_parameter.html" title="The PluginParameter object stores all of the data needed for any type of plugin parameter. It is a large object, but it is not complex as it really just stores LOTS of information about plugin parameters. ">PluginParameter</a> instantiation Code:</b><br />
 goes in the <a class="el" href="class_plugin_core.html#a17c56408d2f63abe0627b7f64d0ad514" title="create all of your plugin parameters here ">PluginCore::initPluginParameters( )</a> function at the top just after the if (pluginParameterMap.size() &gt; 0) statement. Click the [Code -&gt; Clinpbaord] button to copy the code to the clipboard, then paste it into the <a class="el" href="class_plugin_core.html#a17c56408d2f63abe0627b7f64d0ad514" title="create all of your plugin parameters here ">PluginCore::initPluginParameters( )</a> function;</p>
<div class="fragment"><div class="line"><span class="comment">// </span></div><div class="line"><span class="keywordtype">bool</span> <a class="code" href="class_plugin_core.html#a17c56408d2f63abe0627b7f64d0ad514">PluginCore::initPluginParameters</a>()      </div><div class="line">{   </div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="class_plugin_base.html#a5238a5f4ebc1aba0e09f85aa9da44a38">pluginParameterMap</a>.size() &gt; 0)   </div><div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;   </div><div class="line"></div><div class="line">   <a class="code" href="class_plugin_parameter.html">PluginParameter</a>* piParam = <span class="keyword">nullptr</span>;      </div><div class="line"></div><div class="line">   <span class="comment">/* Volume control that is linear in dB */</span>    </div><div class="line">   piParam = <span class="keyword">new</span> <a class="code" href="class_plugin_parameter.html">PluginParameter</a>(controlID::volume_dB, <span class="stringliteral">&quot;Volume&quot;</span>, <span class="stringliteral">&quot;dB&quot;</span>, </div><div class="line">                                 controlVariableType::kDouble, -60.000000, 12.000000, 0.000000, </div><div class="line">                                 taper::kLinearTaper);      </div><div class="line">   piParam-&gt;<a class="code" href="class_plugin_parameter.html#a80f1c77ac23d9eb83ef636e0a42d4950">setBoundVariable</a>(&amp;volume_dB, boundVariableType::kDouble);   </div><div class="line">   <a class="code" href="class_plugin_base.html#a409eb9bed8fa0800488603b2c8a48d3b">addPluginParameter</a>(piParam);      </div><div class="line"></div><div class="line">   etc...</div><div class="line"><span class="comment">//   </span></div></div><!-- fragment --><p><br />
 <b>Parameter Smoothing</b><br />
 ASPiK features automatic parameter smoothing for continuous controls. It can be applied to any continuous control and is a local option, that is, it can be applied to individual parameters (or not at all) and parameters can have different parameter smoothing times (see the Pirkle text for much more information). Most programmers will use the same smoothing time for the majority of their controls. Therefore, parameter smoothing is set on the ASPiK Project Creator panel as a sort of global option. To use it, just open the ASPiK Project Creator panel and check the box along with a default smoothing time in milliseconds. You don't need to create a new project or anything - the parameter smoothing time is the only data that carries over into the GUI Code Creator panel. If you set up parameter smoothing you will have a few more lines of code added - note that you may manipulate the functions later to turn off parameter smoothing or change the smoothing time. These additional lines will be added after the instantiation: <br />
</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#a93dad92b04068eaa9c496f6c3dd87285">setParameterSmoothing</a>(<span class="keyword">true</span>);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#ab66eb7de5587d1725d2e74c925e919d6">setSmoothingTimeMsec</a>(20.000000);      </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>Now you can add the other member variables. Next up is the Mute switch; it is implemented as a String-List parameter with two strings: OFF and ON that determine its state. Hit the [Reset] button on the <b>GUI Code Creator</b> to clear out the last entry. Then, select the "String List Switch (ON, OFF)" parameter type. In this case, we will use the default string list of OFF,ON and set the default to the OFF (0) state. Note that you can name the pair of strings however you like (e.g. ENABLED, DISABLED or OUI, NON) knowing that the first string will map to the value (0) while the second maps to (1). Notice also that we've de-selected the "Include PluginParameter*..." switch. <br />
 </p><div class="image">
<img src="koder2.png" alt="koder2.png"/>
</div>
<p> <br />
 You can now add the bound variable to the <a class="el" href="plugincore_8h.html" title="base class interface file for ASPiK plugincore object ">plugincore.h</a> file and the parameter instantiation code to the <a class="el" href="plugincore_8cpp.html" title="Implementation file for PluginCore object. ">plugincore.cpp</a> file as before, pasting the code in sequence. First, notice how the String-List bound variable declaration resulted in two lines of code; one for the GUI control receiver variable (enableMute) and the other as a strongly typed enumeration that uses the variable name concatenated with "Enum" - this is to allow you to easily evaluate the state of the GUI control item using the built in MACROs that are listed in the SDK. You may decide to use other methods to identify the state of the receiver variable if you wish, but we use the strongly typed enumeration method in the sample code. In ASPiK, String-List controls are ALWAYS bound to variables with the <b>int</b> data-type and using the [Var -&gt; Clipboard] feature will always bind an integer type regardless of what you choose in the drop-list.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">private</span>:      </div><div class="line">   </div><div class="line"><span class="comment">// --- Continuous Plugin Variables     </span></div><div class="line"><span class="keywordtype">double</span> volume_dB = 0.000000;      </div><div class="line"></div><div class="line"><span class="comment">// --- String-List Plugin Variables    </span></div><div class="line"><span class="keywordtype">int</span> enableMute = 0;      </div><div class="line"><span class="keyword">enum class</span> enableMuteEnum { <span class="stringliteral">&quot;OFF,ON&quot;</span> };      </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>Next, you can paste the code for the string list parameter just below the instantiation for the first parameter: <br />
</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">/* Simple mute control - default value is OFF */</span>   </div><div class="line">piParam = <span class="keyword">new</span> <a class="code" href="class_plugin_parameter.html">PluginParameter</a>(controlID::enableMute, <span class="stringliteral">&quot;Mute&quot;</span>, <span class="stringliteral">&quot;OFF,ON&quot;</span>, <span class="stringliteral">&quot;OFF&quot;</span>);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#a80f1c77ac23d9eb83ef636e0a42d4950">setBoundVariable</a>(&amp;enableMute, boundVariableType::kInt);      </div><div class="line">addPluginParameter(piParam);   </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p><br />
 Next up is the channel selection GUI control. This is done with another String-List, but this one will need more than just two states. Reset the GUI Control Creator and select the "String List Switch (multiple taps)" parameter, then enter the information from the GUI control table. Notice that you specify the default value with an unsigned integer index - the list is zero-indexed, so the first item is number 0, the second is 1, etc... <br />
 </p><div class="image">
<img src="koder3.png" alt="koder3.png"/>
</div>
<p> <br />
 Once again use the [Var -&gt; Clipboard] and [Code -&gt; Clipboard] buttons to generate and paste the code into your <a class="el" href="plugincore_8h.html" title="base class interface file for ASPiK plugincore object ">plugincore.h</a> and <a class="el" href="plugincore_8cpp.html" title="Implementation file for PluginCore object. ">plugincore.cpp</a> files:</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">private</span>: </div><div class="line">   <span class="comment">// --- Continuous Plugin Variables    </span></div><div class="line">   <span class="keywordtype">double</span> volume_dB = 0.000000;     </div><div class="line">   </div><div class="line">   <span class="comment">// --- String-List Plugin Variables    </span></div><div class="line">   <span class="keywordtype">int</span> enableMute = 0;      </div><div class="line">   <span class="keyword">enum class</span> enableMuteEnum { <span class="stringliteral">&quot;OFF,ON&quot;</span> };     </div><div class="line">   </div><div class="line">   <span class="keywordtype">int</span> channels = 0;      </div><div class="line">   <span class="keyword">enum class</span> channelsEnum { <span class="stringliteral">&quot;stereo, left, right&quot;</span> };         </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>Then, you can paste the code for the string list parameter just below the instantiation for the first parameter: <br />
</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">/* Channel selector */</span>   </div><div class="line">piParam = <span class="keyword">new</span> <a class="code" href="class_plugin_parameter.html">PluginParameter</a>(controlID::channels, <span class="stringliteral">&quot;Channel Select&quot;</span>, <span class="stringliteral">&quot;stereo, left, right&quot;</span>, <span class="stringliteral">&quot;stereo&quot;</span>);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#a80f1c77ac23d9eb83ef636e0a42d4950">setBoundVariable</a>(&amp;channels, boundVariableType::kInt);      </div><div class="line">addPluginParameter(piParam);      </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>Our last parameter to encode is an output parameter in the form of a VU meter on the GUI. In ASPiK, meter controls are ALWAYS bound to variables with the <b><em>float</em></b> data-type and using the [Var -&gt; Clipboard] feature will always bind a floating point type regardless of what you choose in the drop-list. Once again reset the GUI Control Creator panel and select the "Meter" parameter type, then add the information from the GUI control table like before.<br />
<br />
 <br />
 </p><div class="image">
<img src="koder4.png" alt="koder4.png"/>
</div>
<p> <br />
 Once again use the [Var -&gt; Clipboard] and [Code -&gt; Clipboard] buttons to generate and paste the code into your <a class="el" href="plugincore_8h.html" title="base class interface file for ASPiK plugincore object ">plugincore.h</a> and <a class="el" href="plugincore_8cpp.html" title="Implementation file for PluginCore object. ">plugincore.cpp</a> files:</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">private</span>:      </div><div class="line">   <span class="comment">// --- Continuous Plugin Variables    </span></div><div class="line">   <span class="keywordtype">double</span> volume_dB = 0.000000;     </div><div class="line">   </div><div class="line">   <span class="comment">// --- String-List Plugin Variables    </span></div><div class="line">   <span class="keywordtype">int</span> enableMute = 0;   </div><div class="line">   <span class="keyword">enum class</span> enableMuteEnum { <span class="stringliteral">&quot;OFF,ON&quot;</span> };   </div><div class="line">   </div><div class="line">   <span class="keywordtype">int</span> channels = 0;   </div><div class="line">   <span class="keyword">enum class</span> channelsEnum { <span class="stringliteral">&quot;stereo, left, right&quot;</span> };   </div><div class="line">   </div><div class="line">   <span class="keywordtype">float</span> vuMeter = 0.0;      </div></div><!-- fragment --><p>Then, you can paste the code for the VU meter parameter just below the instantiation for the last parameter:</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">/* Log VU meter control */</span>  </div><div class="line">piParam = <span class="keyword">new</span> <a class="code" href="class_plugin_parameter.html">PluginParameter</a>(controlID::vuMeter, <span class="stringliteral">&quot;Control&quot;</span>, 10.00, 500.00, <a class="code" href="group___constants-_enums.html#ga7d7426d194c2faf64e7b31c24f2c7bb4">ENVELOPE_DETECT_MODE_RMS</a>, meterCal::kLogMeter);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#af1b5d29011ed6e6f48f35deead10b57c">setInvertedMeter</a>(<span class="keyword">false</span>);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#a7b558903d59dcee7fab45ac51cb342e3">setIsProtoolsGRMeter</a>(<span class="keyword">false</span>);      </div><div class="line">piParam-&gt;<a class="code" href="class_plugin_parameter.html#a80f1c77ac23d9eb83ef636e0a42d4950">setBoundVariable</a>(&amp;vuMeter, boundVariableType::kFloat);      </div><div class="line">addPluginParameter(piParam);      </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>At this point, all of the plugin bound variables and plugin parameters have been declared and defined. We can now move on to the plugin's reset operation.<br />
<br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="simple_plugin.html">Write a Plugin</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
