<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Information about the Frame</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('audio_proc1.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Information about the Frame </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <b>processAudioFrame</b> function might be the most important function we implement since it is where we will do the DSP magic for the plugin. If you want to process buffers, then you should still make note of this section, as some of the paradigms are similar. The frame processing function is shown here with its function parameter passed as a <a class="el" href="struct_process_frame_info.html" title="Information package that arrives with each new audio frame; called internally from the buffer process...">ProcessFrameInfo</a> structure.<br />
</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div><div class="line"><span class="keywordtype">bool</span> <a class="code" href="class_plugin_core.html#aeeb07448e6d662d8643b221b7c4413b5">PluginCore::processAudioFrame</a>(<a class="code" href="struct_process_frame_info.html">ProcessFrameInfo</a>&amp; processFrameInfo);</div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>Let's examine that function argument's members:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="struct_process_frame_info.html">ProcessFrameInfo</a>      </div><div class="line">{   </div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#aae28aeb7378c9e8ccf761eb78450f639">audioInputFrame</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#ac2f3460dbe185828412be53276451b72">audioOutputFrame</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#a8797dc475453f5aa84ed5bd09c187de6">auxAudioInputFrame</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#aad142e1ae00dc93954f84612c97f7672">auxAudioOutputFrame</a> = <span class="keyword">nullptr</span>;<span class="comment">// --- for future use   </span></div><div class="line"></div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a97abf46e9dd7d5a3d89a9e725ae0385f">numAudioInChannels</a> = 0;   </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a01fe9fa027d656c7e3ecd85b25cec8fb">numAudioOutChannels</a> = 0;   </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a9908865c214d614a354d4ba3f19a2ef7">numAuxAudioInChannels</a> = 0;   </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a560bbfd108cbc8b34b49c133315685c8">numAuxAudioOutChannels</a> = 0;   </div><div class="line"></div><div class="line">   <a class="code" href="struct_channel_i_o_config.html">ChannelIOConfig</a> <a class="code" href="struct_process_frame_info.html#a6826568d1c6702a7d5f7ded05d5d874d">channelIOConfig</a>;       </div><div class="line">   <a class="code" href="struct_channel_i_o_config.html">ChannelIOConfig</a> <a class="code" href="struct_process_frame_info.html#a763b47564368f610ab444b63e11a8638">auxChannelIOConfig</a>;       </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#ac1bd78d5fbc47f8907e8cd865e475133">currentFrame</a> = 0;   </div><div class="line"></div><div class="line">   <span class="comment">// --- for future use, VCVRack   </span></div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#a4aa496615cb5eb454b385c3372d25110">controlSignalInputs</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   <span class="keywordtype">float</span>* <a class="code" href="struct_process_frame_info.html#a6aa1b82b59d6dd103499c4b8ff44dfb9">controlSignalOutputs</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a16d366196cec1e3011cf081c24d68eca">numControlSignalInputs</a> = 0;   </div><div class="line">   uint32_t <a class="code" href="struct_process_frame_info.html#a805b4a317b15f24e8f135206bbbcbdbd">numControlSignalOutputs</a> = 0;   </div><div class="line"></div><div class="line">   <a class="code" href="struct_host_info.html">HostInfo</a>* <a class="code" href="struct_process_frame_info.html#afe2b0e5ef8d3439a30b1265e2aa61981">hostInfo</a> = <span class="keyword">nullptr</span>;   </div><div class="line">   <a class="code" href="class_i_midi_event_queue.html">IMidiEventQueue</a>* <a class="code" href="struct_process_frame_info.html#a2a15adb10881fe1b8d726d945fdadae7">midiEventQueue</a> = <span class="keyword">nullptr</span>;   </div><div class="line">};   </div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>At the top of the structure are the members that are the audio input and output pointers. Each frame of data consists of one sample from each channel packed into an array of float values. Float values are chosen because they are common across all APIs, thought VST3 does allow for processing doubles as well. The arrays are passed-by-pointer into the frame processing function. Just below these array pointer declarations are the unsigned integers (uint32_t) that tell you how many channels there are in a given frame array and these are easy to interpret: <em>numInputChannels</em> is the array size of the <em>audioInputFrame</em> array while <em>numOutputChannels</em> is the array size of the <em>audioOutputFrame</em> array. The audio samples are packed into the arrays according to the standardized audio file formats. These are published on the internet, and you can also find a very concise description of the channel packing formats in the vstspeaker.h file that is inside the VST3 SDK.<br />
 <br />
 The <em>audioInputFrame</em> and <em>audioOutputFrame</em> arrays hold the frames for the audio input and output busses. The <em>auxAudioInputFrame</em> array holds audio data that is coming from a side-chain. We will use this information in some of our side-chain-able plugins in later chapters. The <em>auxAudioOutputFrame</em> is reserved for future use as plugin APIs begin to implement auxiliary data channels (none do it so far).<br />
 <br />
 The <em><a class="el" href="struct_channel_i_o_config.html" title="Structure of a pair of channel format enumerators that set an input/output channel I/O capability...">ChannelIOConfig</a></em> variables describe more information about the audio I/O configurations than we can with the channel counts alone. The <a class="el" href="struct_channel_i_o_config.html" title="Structure of a pair of channel format enumerators that set an input/output channel I/O capability...">ChannelIOConfig</a> structure holds two member variables, one that describes the input and the other that describes the output channel configurations encoded as channelFormat enumerations. You can find the <em>channelFormat declaration</em> in the <a class="el" href="pluginstructures_8h.html" title="globally utilized structures and enumerations ">pluginstructures.h</a> file. These are especially important for multi-channel plugins. For example, you will see that there are multiple channel formats for a given channel count; kCF7p1Sony, kCF7p1DTS, and kCF7p1Proximity all specify eight total channels (known as “7.1”) yet there are three different channel format specifications to deal with. In addition, your plugin may feature very different configurations from input to output; a fold-down plugin may accept a 7.1 input and deliver a plain stereo output.<br />
 <br />
 Following the channel I/O information is the frame counter variable. This will indicate which frame of the buffer is being processed. We will pass this variable to the MIDI event queue firing mechanism. The <a class="el" href="struct_host_info.html" title="Information from the host that is updated on each buffer process cycle; includes BPM, time signature, SMPTE and other data. The values in the stock structure are consistent across most APIs, however others may be added (commnted out here) ">HostInfo</a> structure holds information from the host about the current buffer of data being processed, including the current session Beats Per Minute (BPM), the time signature numerator and denominator, and the audio track time at which the buffer occurs. There is even more information available such as musical bar position, but these are dependent on the API as well as the DAW that implements the specification; many of these host values are designated as optional and many DAWs ignore them. The last item in the array is a pointer to a MIDI event queue that holds MIDI events that were gathered at the same time as the audio buffer and time-stamped with index values that correspond to locations in the audio buffer. The entire MIDI queue-ing operation is handled in the ASPiK plugin shell code and you don't need to worry about it. As MIDI events are fired, your MIDI handlers will be called in sequence and in a thread-safe manner. <br />
 <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="simple_plugin.html">Write a Plugin</a></li><li class="navelem"><a class="el" href="define_plugin8.html">Processing the Audio Data</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
